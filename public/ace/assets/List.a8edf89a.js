import"./vendor-others.11f5dab8.js";import{_ as w,u as A,v as D}from"./index.5f82e941.js";import{I as E}from"./credential.26787c24.js";import{P as T}from"./Pagination.6e5dfe4b.js";import{C as B}from"./CopyToClipboard.27b2f89b.js";import{n as I,l as P,e as k,m as F,o as L,q as N}from"./vendor-element-plus.4011bc9f.js";import{d as O,ak as o,as as q,H as h,I as t,o as g,R as a,f as i,P as d,J as x,O as R}from"./vendor-@vue.e467cd49.js";import"./vendor-highlight.js.5674318b.js";import"./vendor-axios.938e43d7.js";import"./vendor-qrcode.f15bf907.js";import"./vendor-fortawesome.8c26b529.js";const S=O({name:"ConsoleApplicationList",components:{Pagination:T,CopyToClipboard:B,ElTable:I,ElRow:P,ElButton:k,ElCol:F,ElTableColumn:L,ElCard:N},data(){return{credentialType:E,applications:[],loading:!1,total:void 0,buying:!1,limit:10,form:{amount:1},active:{service:void 0,application:void 0}}},computed:{redirect(){var e;return(e=this.$route.query)==null?void 0:e.redirect},page(){var e;return parseInt(((e=this.$route.query.page)==null?void 0:e.toString())||"1")}},watch:{page:{handler(){this.onFetchData()}},type:{handler(){this.onFetchData()}}},mounted(){this.onFetchData()},methods:{onBuyMore(e){this.$router.push({name:A,params:{id:e.id}})},onPageChange(e){var l;this.$router.push({name:(l=this.$route.name)==null?void 0:l.toString(),query:{...this.$route.query,page:e}})},onFetchData(){this.loading=!0,D.getAll({limit:this.limit,offset:(this.page-1)*this.limit,user_id:this.$store.getters.user.id,ordering:"-created_at"}).then(({data:e})=>{this.applications=e.items,this.loading=!1,this.total=e.count}).catch(()=>{this.loading=!1})},getRemainingAmount(e){var s,r;if(e.remaining_amount===void 0||e.remaining_amount===null)return"";const l=this.$t(`service.unit.${(s=e==null?void 0:e.service)==null?void 0:s.unit}s`);return`${(r=e.remaining_amount)==null?void 0:r.toFixed(6)} ${l}`},getUsedAmount(e){var s,r;if(e.used_amount===void 0||e.used_amount===null)return"";const l=this.$t(`service.unit.${(s=e==null?void 0:e.service)==null?void 0:s.unit}s`);return`${(r=e.used_amount)==null?void 0:r.toFixed(6)} ${l}`}}}),U={class:"title"},z={class:"copy"},M={class:"float-right"},V={class:"pagination m-v-lg"};function H(e,l,s,r,J,Y){const p=o("el-col"),c=o("el-row"),f=o("copy-to-clipboard"),m=o("el-table-column"),v=o("el-button"),$=o("el-table"),b=o("el-card"),y=o("pagination"),C=q("loading");return g(),h(c,{class:"panel"},{default:t(()=>[a(p,{span:24},{default:t(()=>[a(c,null,{default:t(()=>[a(p,{span:24},{default:t(()=>[i("h2",U,d(e.$t("common.title.allApplications")),1)]),_:1})]),_:1}),a(c,null,{default:t(()=>[a(p,{span:24},{default:t(()=>[a(b,{shadow:"hover"},{default:t(()=>[x((g(),h($,{data:e.applications,stripe:"","table-layout":"fixed","empty-text":e.$t("common.message.noData")},{default:t(()=>[a(m,{prop:"id",label:e.$t("application.field.id"),width:"300px","class-name":"text-center"},{default:t(n=>{var u;return[i("span",null,d(n.row.id),1),i("span",z,[a(f,{content:(u=n==null?void 0:n.row)==null?void 0:u.id,class:"inline-block"},null,8,["content"])])]}),_:1},8,["label"]),a(m,{label:e.$t("application.field.name"),width:"180px"},{default:t(n=>{var u,_;return[i("span",null,d((_=(u=n.row)==null?void 0:u.service)==null?void 0:_.title),1)]}),_:1},8,["label"]),a(m,{prop:"remaining_amount",label:e.$t("application.field.remainingAmount"),width:"160px","class-name":"text-center"},{default:t(n=>[i("span",null,d(e.getRemainingAmount(n.row)),1)]),_:1},8,["label"]),a(m,{prop:"used_amount",label:e.$t("application.field.usedAmount"),width:"160px","class-name":"text-center"},{default:t(n=>[i("span",null,d(e.getUsedAmount(n.row)),1)]),_:1},8,["label"]),a(m,{fixed:"right",width:"120px"},{default:t(n=>[i("div",M,[a(v,{type:"primary",round:"",size:"small",onClick:u=>e.onBuyMore(n==null?void 0:n.row)},{default:t(()=>[R(d(e.$t("application.button.buyMore")),1)]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data","empty-text"])),[[C,e.loading]])]),_:1})]),_:1})]),_:1}),a(c,null,{default:t(()=>[a(p,{span:10,offset:14},{default:t(()=>[i("div",V,[a(y,{"current-page":e.page,"page-size":e.limit,total:e.total,onChange:e.onPageChange},null,8,["current-page","page-size","total","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})}var oe=w(S,[["render",H],["__scopeId","data-v-31a091d9"],["__file","D:/react/Nexior/src/pages/console/application/List.vue"]]);export{oe as default};
