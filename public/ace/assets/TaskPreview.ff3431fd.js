import"./vendor-others.11f5dab8.js";import{a2 as me}from"./vendor-fortawesome.8c26b529.js";import{Q as h,T as L,U as V,_ as Ee}from"./index.5f82e941.js";import{e as fe,M as Ve,p as Pe,i as Ce,s as Ne,u as ye}from"./vendor-element-plus.4011bc9f.js";import{d as Ae,ak as _,o as t,e as r,Q as Ue,ah as Re,H as A,I as c,R as l,K as d,f as i,P as o,O as u,M as f,J as pe,S as de}from"./vendor-@vue.e467cd49.js";import{C as $e}from"./CopyToClipboard.27b2f89b.js";var s=(e=>(e.GENERATE="generate",e.UPSCALE1="upscale1",e.UPSCALE2="upscale2",e.UPSCALE3="upscale3",e.UPSCALE4="upscale4",e.VARIATION1="variation1",e.VARIATION2="variation2",e.VARIATION3="variation3",e.VARIATION4="variation4",e.VARIATION_STRONG="variation_strong",e.VARIATION_SUBTLE="variation_subtle",e.UPSCALE_SUBTLE="upscale_subtle",e.UPSCALE_CREATIVE="upscale_creative",e.ZOOM_OUT_2X="zoom_out_2x",e.ZOOM_OUT_1_5X="zoom_out_1_5x",e.SQUARE="square",e.PAN_LEFT="pan_left",e.PAN_UP="pan_up",e.PAN_DOWN="pan_down",e.PAN_RIGHT="pan_right",e.REROLL="reroll",e.UPSCALE_2X="upscale_2x",e.UPSCALE_4X="upscale_4x",e.REDO_UPSCALE_2X="redo_upscale_2x",e.REDO_UPSCALE_4X="redo_upscale_4x",e.REDO_UPSCALE_SUBTLE="redo_upscale_subtle",e.REDO_UPSCALE_CREATIVE="redo_upscale_creative",e))(s||{}),Oe=(e=>(e.PENDING="pending",e.GENERATING="generating",e.FINISHED="finished",e.FAILED="failed",e))(Oe||{}),U=(e=>(e.FAST="fast",e.RELAX="relax",e.TURBO="turbo",e))(U||{});const ke=Ae({name:"ModelSelector",components:{ElButton:fe,FontAwesomeIcon:me},emits:["update:modelValue","select"],data(){return{options:[h,L,V]}},computed:{mode(){return this.$store.state.midjourney.mode}},methods:{onSelect(e){this.$store.dispatch("midjourney/setMode",e)}}}),Ie={class:"channel-selector"};function De(e,a,p,O,Se,ve){const R=_("font-awesome-icon"),m=_("el-button");return t(),r("div",Ie,[(t(!0),r(Ue,null,Re(e.options,(E,S)=>(t(),A(m,{key:S,class:d({button:!0,active:E.name===e.mode.name}),onClick:P=>e.onSelect(E)},{default:c(()=>[l(R,{class:d({icon:!0,[E.name]:!0}),icon:E.icon},null,8,["class","icon"]),i("span",null,o(E.getDisplayName()),1)]),_:2},1032,["class","onClick"]))),128))])}var ts=Ee(ke,[["render",De],["__scopeId","data-v-5f5296ce"],["__file","D:/react/Nexior/src/components/midjourney/ModeSelector.vue"]]);const be=Ae({name:"TaskPreview",components:{ElImage:Ve,ElTag:Pe,ElButton:fe,FontAwesomeIcon:me,ElTooltip:Ce,ElSkeleton:Ne,ElAlert:ye,CopyToClipboard:$e},props:{modelValue:{type:Object,required:!0},full:{type:Boolean,default:!1}},emits:["custom"],data(){return{midjourneyImagineState:Oe,actionMapping:{[s.GENERATE]:"Generate",[s.UPSCALE1]:"U1",[s.UPSCALE2]:"U2",[s.UPSCALE3]:"U3",[s.UPSCALE4]:"U4",[s.VARIATION1]:"V1",[s.VARIATION2]:"V2",[s.VARIATION3]:"V3",[s.VARIATION4]:"V4",[s.VARIATION_STRONG]:"Vary (Strong)",[s.VARIATION_SUBTLE]:"Vary (Subtle)",[s.UPSCALE_CREATIVE]:"Upscale (Creative)",[s.UPSCALE_SUBTLE]:"Upscale (Subtle)",[s.ZOOM_OUT_2X]:"Zoom Out 2x",[s.ZOOM_OUT_1_5X]:"Zoom Out 1.5x",[s.UPSCALE_2X]:"Upscale 2x",[s.UPSCALE_4X]:"Upscale 4x",[s.REDO_UPSCALE_2X]:"Redo Upscale 2x",[s.REDO_UPSCALE_4X]:"Redo Upscale 4x",[s.REDO_UPSCALE_SUBTLE]:"Redo Upscale (Subtle)",[s.REDO_UPSCALE_CREATIVE]:"Redo Upscale (Creative)",[s.SQUARE]:"Make Square",[s.PAN_LEFT]:"\u2B05\uFE0F",[s.PAN_UP]:"\u2B06\uFE0F",[s.PAN_DOWN]:"\u2B07\uFE0F",[s.PAN_RIGHT]:"\u27A1\uFE0F",[s.REROLL]:"\u{1F504}"},descriptionMapping:{[s.GENERATE]:this.$t("midjourney.action.generate"),[s.UPSCALE1]:this.$t("midjourney.action.upscale1"),[s.UPSCALE2]:this.$t("midjourney.action.upscale2"),[s.UPSCALE3]:this.$t("midjourney.action.upscale3"),[s.UPSCALE4]:this.$t("midjourney.action.upscale4"),[s.VARIATION1]:this.$t("midjourney.action.variation1"),[s.VARIATION2]:this.$t("midjourney.action.variation2"),[s.VARIATION3]:this.$t("midjourney.action.variation3"),[s.VARIATION4]:this.$t("midjourney.action.variation4"),[s.VARIATION_STRONG]:this.$t("midjourney.action.variation_strong"),[s.VARIATION_SUBTLE]:this.$t("midjourney.action.variation_subtle"),[s.ZOOM_OUT_2X]:this.$t("midjourney.action.zoom_out_2x"),[s.ZOOM_OUT_1_5X]:this.$t("midjourney.action.zoom_out_1_5x"),[s.UPSCALE_2X]:this.$t("midjourney.action.upscale_2x"),[s.UPSCALE_4X]:this.$t("midjourney.action.upscale_4x"),[s.UPSCALE_SUBTLE]:this.$t("midjourney.action.upscale_subtle"),[s.UPSCALE_CREATIVE]:this.$t("midjourney.action.upscale_creative"),[s.REDO_UPSCALE_2X]:this.$t("midjourney.action.redo_upscale_2x"),[s.REDO_UPSCALE_4X]:this.$t("midjourney.action.redo_upscale_4x"),[s.REDO_UPSCALE_SUBTLE]:this.$t("midjourney.action.redo_upscale_subtle"),[s.REDO_UPSCALE_CREATIVE]:this.$t("midjourney.action.redo_upscale_creative"),[s.SQUARE]:this.$t("midjourney.action.square"),[s.PAN_LEFT]:this.$t("midjourney.action.pan_left"),[s.PAN_UP]:this.$t("midjourney.action.pan_up"),[s.PAN_DOWN]:this.$t("midjourney.action.pan_down"),[s.PAN_RIGHT]:this.$t("midjourney.action.pan_right"),[s.REROLL]:this.$t("midjourney.action.reroll")}}},computed:{application(){return this.$store.state.midjourney.application},mode(){var e;switch((e=this.modelValue)==null?void 0:e.mode){case U.FAST:return h;case U.TURBO:return V;case U.RELAX:return L;default:return}}},methods:{onReload(e){const a=e.target,p=new URL(a.src),O=p.searchParams.get("retry");if(!O)p.searchParams.set("retry","1");else if(parseInt(O)<2)p.searchParams.set("retry",(parseInt(O)+1).toString());else return;a.src=p.toString()},onCustom(e){var a,p;this.$emit("custom",{action:e,image_id:(p=(a=this.modelValue)==null?void 0:a.response)==null?void 0:p.image_id})},onDownload(e){const a=document.createElement("a");a.href=e,a.download=e.split("/").pop(),a.click()},getModeIcon(e){switch(e){case U.FAST:return h.icon;case U.TURBO:return V.icon;case U.RELAX:return L.icon}}}}),ge={class:"preview"},we={class:"info mb-4"},Be={class:"left"},Xe={class:"right"},Fe={class:"extra"},je={key:0,class:"prompt"},Ge={class:"image-slot"},Ze={class:"description"},ze={class:"description"},qe={key:1,class:"progress"},He={class:"extra"},Qe={key:0,class:"datetime"},Je={class:"description"};function We(e,a,p,O,Se,ve){var C,N,y,$,k,I,D,b,g,w,B,X,F,j,G,Z,z,q,H,Q,J,W,Y,K,M,x,ee,se,te,oe,ae;const R=_("el-tag"),m=_("font-awesome-icon"),E=_("el-image"),S=_("copy-to-clipboard"),P=_("el-alert"),Te=_("el-button"),he=_("el-tooltip"),Le=_("el-skeleton");return t(),r("div",ge,[i("div",we,[i("div",Be,[((N=(C=e.modelValue)==null?void 0:C.response)==null?void 0:N.success)===!0?(t(),A(R,{key:0,type:"success"},{default:c(()=>[u(o(e.$t("midjourney.button.success")),1)]),_:1})):f("v-if",!0),(($=(y=e.modelValue)==null?void 0:y.response)==null?void 0:$.success)===!1?(t(),A(R,{key:1,type:"danger"},{default:c(()=>[u(o(e.$t("midjourney.button.failed")),1)]),_:1})):f("v-if",!0),(k=e.modelValue)!=null&&k.response?f("v-if",!0):(t(),A(R,{key:2,type:"info"},{default:c(()=>[u(o(e.$t("midjourney.button.generating")),1)]),_:1}))]),i("div",Xe,[e.mode?(t(),A(R,{key:0,type:"info",class:"channel"},{default:c(()=>{var n;return[l(m,{class:d({icon:!0,[e.mode.name]:!0}),icon:e.mode.icon},null,8,["class","icon"]),u(" "+o((n=e.mode)==null?void 0:n.getDisplayName()),1)]}),_:1})):f("v-if",!0)])]),i("div",Fe,[(D=(I=e.modelValue)==null?void 0:I.request)!=null&&D.prompt?(t(),r("p",je,[l(m,{icon:"fa-solid fa-magic",class:"mr-1"}),u(" "+o((g=(b=e.modelValue)==null?void 0:b.request)==null?void 0:g.prompt),1)])):f("v-if",!0)]),(w=e.modelValue)!=null&&w.response?((B=e.modelValue)==null?void 0:B.response.success)===!1?(t(),r("div",{key:1,class:d({content:!0,full:e.full,failed:!0,"p-2":!0})},[l(P,{closable:!1},{template:c(()=>[l(m,{icon:"fa-solid fa-exclamation-triangle",class:"mr-1"}),u(" "+o(e.$t("midjourney.field.failure")),1)]),default:c(()=>{var n,v,T,le,re,ne,ie,ue,ce,_e;return[i("p",Ze,[l(m,{icon:"fa-solid fa-circle-info",class:"mr-1"}),u(" "+o(e.$t("midjourney.field.failureReason"))+": "+o((T=(v=(n=e.modelValue)==null?void 0:n.response)==null?void 0:v.error)==null?void 0:T.message)+" ",1),l(S,{content:(ne=(re=(le=e.modelValue)==null?void 0:le.response)==null?void 0:re.error)==null?void 0:ne.message,class:"btn-copy"},null,8,["content"])]),i("p",ze,[l(m,{icon:"fa-solid fa-hashtag",class:"mr-1"}),u(" "+o(e.$t("midjourney.field.traceId"))+": "+o((ue=(ie=e.modelValue)==null?void 0:ie.response)==null?void 0:ue.trace_id)+" ",1),l(S,{content:(_e=(ce=e.modelValue)==null?void 0:ce.response)==null?void 0:_e.trace_id,class:"btn-copy"},null,8,["content"])])]}),_:1})],2)):(t(),r("div",{key:2,class:d({content:!0,full:e.full})},[(F=(X=e.modelValue)==null?void 0:X.response)!=null&&F.image_url?(t(),A(E,{key:0,src:(G=(j=e.modelValue)==null?void 0:j.response)==null?void 0:G.image_url,"preview-src-list":[(z=(Z=e.modelValue)==null?void 0:Z.response)==null?void 0:z.raw_image_url],fit:"contain",class:"image",lazy:!0,onError:a[0]||(a[0]=n=>e.onReload(n))},null,8,["src","preview-src-list"])):f("v-if",!0),((H=(q=e.modelValue)==null?void 0:q.response)==null?void 0:H.progress)!==void 0&&((J=(Q=e.modelValue)==null?void 0:Q.response)==null?void 0:J.progress)!==100?(t(),r("p",qe,o((Y=(W=e.modelValue)==null?void 0:W.response)==null?void 0:Y.progress)+"% ",1)):f("v-if",!0)],2)):(t(),r("div",{key:0,class:d({content:!0,full:!!e.full})},[l(E,{class:"image"},{error:c(()=>[i("div",Ge,o(e.$t("midjourney.message.generating")),1)]),_:1})],2)),(M=(K=e.modelValue)==null?void 0:K.response)!=null&&M.actions?(t(),r("div",{key:3,class:d({operations:!0,full:e.full})},[(t(!0),r(Ue,null,Re((ee=(x=e.modelValue)==null?void 0:x.response)==null?void 0:ee.actions,(n,v)=>(t(),A(he,{key:v,class:"box-item",effect:"dark",content:e.descriptionMapping[n],placement:"top-start"},{default:c(()=>[l(Te,{type:"info",size:"small",class:"btn-action",onClick:T=>e.onCustom(n)},{default:c(()=>[u(o(e.actionMapping[n]),1)]),_:2},1032,["onClick"])]),_:2},1032,["content"]))),128))],2)):(se=e.modelValue)!=null&&se.response?pe((t(),r("div",{key:5,class:d({operations:!0,full:e.full})},[i("p",null,o(e.$t("midjourney.message.noOperations")),1)],2)),[[de,e.full]]):pe((t(),r("div",{key:4,class:d({operations:!0,full:e.full})},[l(Le,{rows:1})],2)),[[de,e.full]]),i("div",He,[(te=e.modelValue)!=null&&te.created_at?(t(),r("p",Qe,[l(m,{icon:"fa-regular fa-clock",class:"mr-1"}),u(" "+o(e.$dayjs.format(""+new Date(parseFloat((oe=e.modelValue)==null?void 0:oe.created_at)*1e3))),1)])):f("v-if",!0),i("p",Je,o(e.$t("midjourney.field.taskId"))+": "+o((ae=e.modelValue)==null?void 0:ae.id),1)])])}var os=Ee(be,[["render",We],["__scopeId","data-v-cc371bca"],["__file","D:/react/Nexior/src/components/midjourney/tasks/TaskPreview.vue"]]);export{ts as M,os as T,s as a};
