import"./vendor-others.11f5dab8.js";import{o as E}from"./order.09a5605b.js";import{P as O}from"./Pagination.6e5dfe4b.js";import{C as P}from"./CopyToClipboard.27b2f89b.js";import{O as S}from"./order.1bf5c3a2.js";import{_ as I}from"./index.5f82e941.js";import{l as N,m as A,n as B,o as F,e as L,p as T,q}from"./vendor-element-plus.4011bc9f.js";import{d as z,ak as r,as as V,H as f,I as t,o as l,R as a,f as n,P as s,J as R,e as h,O as p,M as H}from"./vendor-@vue.e467cd49.js";import"./vendor-highlight.js.5674318b.js";import"./vendor-fortawesome.8c26b529.js";import"./vendor-axios.938e43d7.js";import"./vendor-qrcode.f15bf907.js";const M=z({name:"ConsoleOrderList",components:{Pagination:O,CopyToClipboard:P,ElRow:N,ElCol:A,ElTable:B,ElTableColumn:F,ElButton:L,ElTag:T,ElCard:q},data(){return{OrderState:S,orders:[],loading:!1,total:void 0,limit:Math.floor((window.innerHeight-300)/50)}},computed:{redirect(){return this.$route.query.redirect},page(){var e;return parseInt(((e=this.$route.query.page)==null?void 0:e.toString())||"1")}},watch:{page:{handler(){this.onFetchData()}}},mounted(){this.onFetchData()},methods:{onPageChange(e){var g;this.$router.push({name:(g=this.$route.name)==null?void 0:g.toString(),query:{page:e}})},onFetchData(){this.loading=!0,E.getAll({ordering:"-created_at",limit:this.limit,offset:(this.page-1)*this.limit,user_id:this.$store.getters.user.id}).then(({data:e})=>{this.orders=e.items,this.loading=!1,this.total=e.count}).catch(()=>{this.loading=!1})}}}),j={class:"title"},G={class:"key"},J={class:"copy"},X={class:"price"},K={key:0},Q={key:1,class:"state state-paid"},U={key:2,class:"state state-expired"},W={key:3,class:"state state-failed"},Y={class:"description"},Z={class:"created-at"},x={class:"float-right"},ee={class:"pagination m-v-lg"};function te(e,g,ae,oe,se,re){const _=r("el-col"),u=r("el-row"),b=r("copy-to-clipboard"),d=r("el-table-column"),m=r("el-tag"),w=r("el-button"),k=r("el-table"),v=r("el-card"),C=r("pagination"),D=V("loading");return l(),f(u,{class:"panel"},{default:t(()=>[a(_,{span:24},{default:t(()=>[a(u,null,{default:t(()=>[a(_,{span:24},{default:t(()=>[n("h2",j,s(e.$t("common.title.allOrders")),1)]),_:1})]),_:1}),a(u,null,{default:t(()=>[a(_,{span:24},{default:t(()=>[a(v,{shadow:"hover"},{default:t(()=>[R((l(),f(k,{data:e.orders,stripe:""},{default:t(()=>[a(d,{prop:"id",label:e.$t("order.field.id"),"class-name":"text-center",width:"350px"},{default:t(o=>[n("span",G,s(o.row.id),1),n("span",J,[a(b,{content:o.row.id},null,8,["content"])])]),_:1},8,["label"]),a(d,{label:e.$t("order.field.price"),width:"100px"},{default:t(o=>{var i,c;return[n("span",X,"$"+s((c=(i=o.row)==null?void 0:i.price)==null?void 0:c.toFixed(2)),1)]}),_:1},8,["label"]),a(d,{prop:"state",label:e.$t("order.field.state"),"class-name":"text-center",width:"150px"},{default:t(o=>{var i,c,$,y;return[o.row.state===((i=e.OrderState)==null?void 0:i.PENDING)?(l(),h("span",K,[a(m,{type:"info",class:"mx-1",effect:"dark"},{default:t(()=>[p(s(e.$t("order.state.pending")),1)]),_:1})])):o.row.state===((c=e.OrderState)==null?void 0:c.PAID)?(l(),h("span",Q,[a(m,{type:"success",class:"mx-1",effect:"dark"},{default:t(()=>[p(s(e.$t("order.state.paid")),1)]),_:1})])):o.row.state===(($=e.OrderState)==null?void 0:$.EXPIRED)?(l(),h("span",U,[a(m,{type:"warning",class:"mx-1",effect:"dark"},{default:t(()=>[p(s(e.$t("order.state.expired")),1)]),_:1})])):o.row.state===((y=e.OrderState)==null?void 0:y.FAILED)?(l(),h("span",W,[a(m,{type:"danger",class:"mx-1",effect:"dark"},{default:t(()=>[p(s(e.$t("order.state.failed")),1)]),_:1})])):H("v-if",!0)]}),_:1},8,["label"]),a(d,{label:e.$t("order.field.description"),width:"300px"},{default:t(o=>[n("span",Y,s(o.row.description),1)]),_:1},8,["label"]),a(d,{label:e.$t("order.field.createdAt"),width:"180px"},{default:t(o=>[n("span",Z,s(e.$dayjs.format(o.row.created_at)),1)]),_:1},8,["label"]),a(d,{fixed:"right","min-width":"120px"},{default:t(o=>[n("div",x,[o.row.state!==e.OrderState.PAID?(l(),f(w,{key:0,type:"primary",size:"small",round:"",onClick:i=>e.$router.push({name:"console-order-detail",params:{id:o.row.id}})},{default:t(()=>[p(s(e.$t("order.button.continuePay")),1)]),_:2},1032,["onClick"])):(l(),f(w,{key:1,size:"small",round:"",onClick:i=>e.$router.push({name:"console-order-detail",params:{id:o.row.id}})},{default:t(()=>[p(s(e.$t("order.button.checkDetail")),1)]),_:2},1032,["onClick"]))])]),_:1})]),_:1},8,["data"])),[[D,e.loading]])]),_:1})]),_:1})]),_:1}),a(u,null,{default:t(()=>[a(_,{span:10,offset:14},{default:t(()=>[n("div",ee,[a(C,{"current-page":e.page,"page-size":e.limit,total:e.total,onChange:e.onPageChange},null,8,["current-page","page-size","total","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})}var we=I(M,[["render",te],["__scopeId","data-v-388af89b"],["__file","D:/react/Nexior/src/pages/console/order/List.vue"]]);export{we as default};
