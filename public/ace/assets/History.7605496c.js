import"./vendor-others.11f5dab8.js";import{P as y}from"./Pagination.6e5dfe4b.js";import{C as $}from"./CopyToClipboard.27b2f89b.js";import{b as v}from"./distribution.24bbc8e4.js";import{_ as C}from"./index.5f82e941.js";import{l as H,m as D,n as F,o as E,q as P}from"./vendor-element-plus.4011bc9f.js";import{d as k,ak as s,as as q,H as m,I as o,o as h,R as e,f as a,P as n,J as I}from"./vendor-@vue.e467cd49.js";import"./vendor-highlight.js.5674318b.js";import"./vendor-fortawesome.8c26b529.js";import"./vendor-axios.938e43d7.js";import"./vendor-qrcode.f15bf907.js";const S=k({name:"ConsoleDistributionList",components:{Pagination:y,CopyToClipboard:$,ElRow:H,ElCol:D,ElTable:F,ElTableColumn:E,ElCard:P},data(){return{distributionHistories:[],distributionStatus:void 0,loading:!1,total:void 0,limit:10}},computed:{redirect(){return this.$route.query.redirect},page(){var t;return parseInt(((t=this.$route.query.page)==null?void 0:t.toString())||"1")}},watch:{page:{handler(){this.onFetchData()}}},mounted(){this.onFetchData()},methods:{onPageChange(t){var u;this.$router.push({name:(u=this.$route.name)==null?void 0:u.toString(),query:{page:t}})},onFetchData(){this.loading=!0,Promise.all([this.onFetchDistributionHistory()]).finally(()=>{this.loading=!1})},async onFetchDistributionHistory(){const{data:t}=await v.getAll({user_id:this.$store.getters.user.id,ordering:"-created_at",limit:this.limit,offset:(this.page-1)*this.limit});this.distributionHistories=t.items,this.total=t.count}}}),x={class:"title"},A={class:"key"},B={class:"copy"},N={class:"key"},T={class:"copy"},z={class:"price"},R={class:"description"},V={class:"description"},j={class:"created-at"},J={class:"pagination m-v-lg"};function L(t,u,O,G,K,M){const c=s("el-col"),p=s("el-row"),_=s("copy-to-clipboard"),r=s("el-table-column"),f=s("el-table"),b=s("el-card"),g=s("pagination"),w=q("loading");return h(),m(p,{class:"panel"},{default:o(()=>[e(c,{span:24},{default:o(()=>[e(p,null,{default:o(()=>[e(c,{span:24},{default:o(()=>[a("h2",x,n(t.$t("common.title.distributionHistory")),1)]),_:1})]),_:1}),e(p,null,{default:o(()=>[e(c,{span:24},{default:o(()=>[e(b,{shadow:"hover"},{default:o(()=>[I((h(),m(f,{data:t.distributionHistories,stripe:""},{default:o(()=>[e(r,{prop:"id",label:t.$t("distribution.field.id"),"class-name":"text-center",width:"350px"},{default:o(i=>[a("span",A,n(i.row.id),1),a("span",B,[e(_,{content:i.row.id},null,8,["content"])])]),_:1},8,["label"]),e(r,{prop:"id",label:t.$t("distribution.field.userId"),"class-name":"text-center",width:"350px"},{default:o(i=>[a("span",N,n(i.row.user_id),1),a("span",T,[e(_,{content:i.row.user_id},null,8,["content"])])]),_:1},8,["label"]),e(r,{label:t.$t("distribution.field.price"),width:"100px"},{default:o(i=>{var l,d;return[a("span",z,"\xA5"+n((d=(l=i.row)==null?void 0:l.price)==null?void 0:d.toFixed(2)),1)]}),_:1},8,["label"]),e(r,{label:t.$t("distribution.field.reward"),width:"100px"},{default:o(i=>{var l,d;return[a("span",R,"\uFFE5"+n((d=(l=i.row)==null?void 0:l.reward)==null?void 0:d.toFixed(2)),1)]}),_:1},8,["label"]),e(r,{label:t.$t("distribution.field.percentage"),width:"100px"},{default:o(i=>[a("span",V,n(i.row.percentage)+"%",1)]),_:1},8,["label"]),e(r,{label:t.$t("distribution.field.createdAt"),width:"200px"},{default:o(i=>[a("span",j,n(t.$dayjs.format(i.row.created_at)),1)]),_:1},8,["label"])]),_:1},8,["data"])),[[w,t.loading]])]),_:1})]),_:1})]),_:1}),e(p,null,{default:o(()=>[e(c,{span:10,offset:14},{default:o(()=>[a("div",J,[e(g,{"current-page":t.page,"page-size":t.limit,total:t.total,onChange:t.onPageChange},null,8,["current-page","page-size","total","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})}var st=C(S,[["render",L],["__scopeId","data-v-63f0e9ed"],["__file","D:/react/Nexior/src/pages/distribution/History.vue"]]);export{st as default};
