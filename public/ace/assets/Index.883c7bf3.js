import"./vendor-others.11f5dab8.js";import{C as Y}from"./CopyToClipboard.27b2f89b.js";import{_ as R,V as X,W as G,X as K}from"./index.5f82e941.js";import{d as H,a as Z}from"./distribution.24bbc8e4.js";import{a2 as z}from"./vendor-fortawesome.8c26b529.js";import{Q as x}from"./vendor-qrcode.f15bf907.js";import{i as V,e as Q,Q as tt,l as et,m as it,t as st,q as ot,n as nt,o as lt,s as at}from"./vendor-element-plus.4011bc9f.js";import{d as U,ak as n,o as l,e as b,R as e,I as o,H as p,f as i,P as s,O as y,M as D}from"./vendor-@vue.e467cd49.js";import"./vendor-highlight.js.5674318b.js";import"./vendor-axios.938e43d7.js";const rt=U({name:"HelpEntry",components:{ElTooltip:V,ElButton:Q,FontAwesomeIcon:z},methods:{onJoin(){window.open("https://discord.gg/73F3MYj3vp","_blank")}}});function dt(t,a,h,m,v,w){const f=n("font-awesome-icon"),r=n("el-button"),u=n("el-tooltip");return l(),b("div",null,[e(u,{effect:"dark",content:t.$t("common.message.joinDiscord"),placement:"top-start"},{default:o(()=>[e(r,{type:"primary",circle:"",size:"large",onClick:t.onJoin},{default:o(()=>[e(f,{icon:"fa-brands fa-discord"})]),_:1},8,["onClick"])]),_:1},8,["content"])])}var ct=R(rt,[["render",dt],["__file","D:/react/Nexior/src/components/common/HelpEntry.vue"]]);const ut=U({name:"ConsoleDistributionList",components:{CopyToClipboard:Y,FontAwesomeIcon:z,QrCode:x,HelpEntry:ct,ElProgress:tt,ElRow:et,ElCol:it,ElButton:Q,ElDivider:st,ElCard:ot,ElTooltip:V,ElTable:nt,ElTableColumn:lt,ElSkeleton:at},data(){return{invitees:[],inviteesCount:void 0,distributionLevels:[],distributionStatus:void 0,loading:!1}},computed:{redirect(){return this.$route.query.redirect},page(){var t;return parseInt(((t=this.$route.query.page)==null?void 0:t.toString())||"1")},distributionLevelMap(){let t={};return this.distributionLevels.forEach(a=>{t[a.level]=a}),t},distributionLink(){var a;const t=window.location.origin;return(a=this.$store.getters.user)!=null&&a.id?`${t}?inviter_id=${this.$store.getters.user.id}`:t}},watch:{page:{handler(){this.onFetchData()}}},async mounted(){this.onFetchData()},methods:{goHistory(){this.$router.push({name:X})},goInvitees(){this.$router.push({name:G})},onPageChange(t){var a;this.$router.push({name:(a=this.$route.name)==null?void 0:a.toString(),query:{page:t}})},getPercentageForNextLevel(){var h,m,v,w,f,r,u;const t=(v=this.distributionLevelMap[(m=(h=this.distributionStatus)==null?void 0:h.level)==null?void 0:m.level])==null?void 0:v.threshold,a=(r=this.distributionLevelMap[((f=(w=this.distributionStatus)==null?void 0:w.level)==null?void 0:f.level)+1])==null?void 0:r.threshold;return Math.floor((((u=this.distributionStatus)==null?void 0:u.price)-t)/(a-t)*100)},getDeltaForNextLevel(){var a,h,m,v;const t=(m=this.distributionLevelMap[((h=(a=this.distributionStatus)==null?void 0:a.level)==null?void 0:h.level)+1])==null?void 0:m.threshold;return Math.floor(t-((v=this.distributionStatus)==null?void 0:v.price))},async onFetchData(){this.loading=!0,await H.initialize(),Promise.all([this.onFetchDistributionStatus(),this.onFetchDistributionLevels(),this.onFetchInvitees()]).finally(()=>{this.loading=!1})},async onFetchDistributionStatus(){const{data:t}=await H.getAll({user_id:this.$store.getters.user.id});t.items&&t.items.length>0&&(this.distributionStatus=t.items[0])},async onFetchDistributionLevels(){const{data:t}=await Z.getAll({limit:20,user_id:this.$store.getters.user.id});this.distributionLevels=t.items},async onFetchInvitees(){const{data:t}=await K.getInvitees({});this.invitees=t.items,this.inviteesCount=t.count}}}),pt={class:"title"},_t={key:1},ht={class:"icon-wrapper"},mt={class:"text-left"},vt={class:"description"},bt={class:"value"},ft={key:1},gt={class:"icon-wrapper"},$t={class:"text-left"},kt={class:"description"},yt={class:"value"},wt={key:1},Lt={class:"icon-wrapper"},St={class:"text-left"},Ct={class:"description"},Dt={class:"value"},It={key:1},Et={class:"icon-wrapper"},Ft={class:"text-left"},Tt={class:"description"},Nt={class:"value"},Mt={key:1},Bt={class:"title"},Ot={class:"clear-both overflow-hidden"},Pt={class:"float-left description"},qt={class:"float-right description"},Ht={class:"description"},Rt={class:"level"},zt={class:"level"},Vt={class:"level"},Qt={key:1},Ut={class:"title"},At={class:"link-wrapper text-center"},jt=["href"],Jt={class:"qr-wrapper ml-auto mr-auto"},Wt={class:"mt-0"},Yt={class:"description"},Xt={class:"more"};function Gt(t,a,h,m,v,w){const f=n("help-entry"),r=n("el-col"),u=n("el-row"),g=n("el-skeleton"),L=n("font-awesome-icon"),S=n("el-button"),$=n("el-card"),I=n("el-tooltip"),A=n("el-progress"),E=n("el-divider"),C=n("el-table-column"),j=n("el-table"),J=n("copy-to-clipboard"),W=n("qr-code");return l(),p(u,{class:"panel"},{default:o(()=>[e(f,{class:"help"}),e(r,{span:24},{default:o(()=>[e(u,null,{default:o(()=>[e(r,{span:24},{default:o(()=>[i("h2",pt,s(t.$t("common.title.distribution")),1)]),_:1})]),_:1}),e(u,{gutter:15},{default:o(()=>[e(r,{md:6,xs:24},{default:o(()=>[e($,{shadow:"hover",class:"item-mini mb-4"},{default:o(()=>{var d,c;return[t.loading?(l(),p(g,{key:0})):(l(),b("div",_t,[i("div",ht,[e(L,{icon:"fa-solid fa-wallet",class:"icon"})]),i("div",mt,[i("p",vt,s(t.$t("distribution.title.price")),1),i("p",bt,"$"+s((c=(d=t.distributionStatus)==null?void 0:d.price)==null?void 0:c.toFixed(2)),1)]),e(S,{type:"primary",round:"",size:"small",class:"btn",onClick:t.goHistory},{default:o(()=>[y(s(t.$t("distribution.button.detail")),1)]),_:1},8,["onClick"])]))]}),_:1})]),_:1}),e(r,{md:6,xs:24},{default:o(()=>[e($,{shadow:"hover",class:"item-mini mb-4"},{default:o(()=>{var d,c;return[t.loading?(l(),p(g,{key:0})):(l(),b("div",ft,[i("div",gt,[e(L,{icon:"fa-solid fa-coins",class:"icon"})]),i("div",$t,[i("p",kt,s(t.$t("distribution.title.reward")),1),i("p",yt,"$"+s((c=(d=t.distributionStatus)==null?void 0:d.reward)==null?void 0:c.toFixed(2)),1)]),e(I,{effect:"dark",content:t.$t("distribution.message.developingWithDrawal"),placement:"top"},{default:o(()=>[e(S,{type:"primary",round:"",size:"small",class:"btn"},{default:o(()=>[y(s(t.$t("distribution.button.withdrawal")),1)]),_:1})]),_:1},8,["content"])]))]}),_:1})]),_:1}),e(r,{md:6,xs:24},{default:o(()=>[e($,{shadow:"hover",class:"item-mini mb-4"},{default:o(()=>{var d,c;return[t.loading?(l(),p(g,{key:0})):(l(),b("div",wt,[i("div",Lt,[e(L,{icon:"fa-solid fa-percent",class:"icon"})]),i("div",St,[i("p",Ct,s(t.$t("distribution.title.percentage")),1),i("p",Dt,s((c=(d=t.distributionStatus)==null?void 0:d.level)==null?void 0:c.percentage)+"%",1)])]))]}),_:1})]),_:1}),e(r,{md:6,xs:24},{default:o(()=>[e($,{shadow:"hover",class:"item-mini mb-4"},{default:o(()=>[t.loading?(l(),p(g,{key:0})):(l(),b("div",It,[i("div",Et,[e(L,{icon:"fa-regular fa-user",class:"icon"})]),i("div",Ft,[i("p",Tt,s(t.$t("distribution.title.inviteesCount")),1),i("p",Nt,s(t.inviteesCount),1)]),e(S,{type:"primary",round:"",size:"small",class:"btn",onClick:t.goInvitees},{default:o(()=>[y(s(t.$t("distribution.button.detail")),1)]),_:1},8,["onClick"])]))]),_:1})]),_:1})]),_:1}),e(u,{gutter:15},{default:o(()=>[e(r,{md:12,xs:24},{default:o(()=>[e($,{shadow:"hover",class:"level-info mb-4"},{default:o(()=>{var d,c,F,T,N,M,B,O,P,q;return[t.loading?(l(),p(g,{key:0})):(l(),b("div",Mt,[i("h4",Bt,s(t.$t("distribution.title.levelInfo")),1),i("div",Ot,[i("div",Pt,[i("p",null,s(t.$t("distribution.title.currentLevel"))+": L"+s((c=(d=t.distributionStatus)==null?void 0:d.level)==null?void 0:c.level),1),i("p",null,s(t.$t("distribution.title.currentPercentage"))+": "+s((N=t.distributionLevelMap[(T=(F=t.distributionStatus)==null?void 0:F.level)==null?void 0:T.level])==null?void 0:N.percentage)+"% ",1)]),i("div",qt,[i("p",null,s(t.$t("distribution.title.nextLevel"))+": L"+s(((B=(M=t.distributionStatus)==null?void 0:M.level)==null?void 0:B.level)+1),1),i("p",null,s(t.$t("distribution.title.nextPercentage"))+": "+s((q=t.distributionLevelMap[((P=(O=t.distributionStatus)==null?void 0:O.level)==null?void 0:P.level)+1])==null?void 0:q.percentage)+"% ",1)])]),e(A,{"text-inside":!0,"stroke-width":20,percentage:t.getPercentageForNextLevel(),class:"mb-2"},null,8,["percentage"]),i("p",Ht,s(t.$t("distribution.message.deltaPriceForNextLevel"))+": $"+s(t.getDeltaForNextLevel()),1),e(E),t.distributionLevels?(l(),p(j,{key:0,data:t.distributionLevels,stripe:""},{default:o(()=>[e(C,{label:t.$t("distribution.field.level")},{default:o(k=>{var _;return[i("span",Rt,"L"+s((_=k.row)==null?void 0:_.level),1)]}),_:1},8,["label"]),e(C,{label:t.$t("distribution.field.threshold")},{default:o(k=>{var _;return[i("span",zt,"$"+s((_=k.row)==null?void 0:_.threshold),1)]}),_:1},8,["label"]),e(C,{label:t.$t("distribution.field.percentage")},{default:o(k=>{var _;return[i("span",Vt,s((_=k.row)==null?void 0:_.percentage)+"%",1)]}),_:1},8,["label"])]),_:1},8,["data"])):D("v-if",!0)]))]}),_:1})]),_:1}),e(r,{md:12,xs:24},{default:o(()=>[e($,{shadow:"hover",class:"distribution-info mb-4"},{default:o(()=>[t.loading?(l(),p(g,{key:0})):(l(),b("div",Qt,[i("h4",Ut,s(t.$t("distribution.title.distributionLink")),1),e(E),i("div",At,[D("v-if",!0),i("a",{href:t.distributionLink,class:"link"},s(t.distributionLink),9,jt),e(J,{content:t.distributionLink},null,8,["content"])]),i("div",Jt,[t.distributionLink?(l(),p(W,{key:0,value:t.distributionLink,size:150,class:"block mb-2 ml-auto mr-auto"},null,8,["value"])):D("v-if",!0),i("p",Wt,s(t.$t("distribution.message.distributionQrDescription")),1)]),i("p",Yt,[y(s(t.$t("distribution.message.distributionLinkDescription"))+" ",1),i("span",Xt,[e(I,{effect:"dark",content:t.$t("distribution.message.distributionLinkDescription2"),placement:"top"},{default:o(()=>[y(s(t.$t("distribution.message.technicalDetail")),1)]),_:1},8,["content"])])])]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}var ae=R(ut,[["render",Gt],["__scopeId","data-v-732e1b6b"],["__file","D:/react/Nexior/src/pages/distribution/Index.vue"]]);export{ae as default};
